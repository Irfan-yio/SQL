CREATE DATABASE IF NOT EXISTS MovieCatalogue;

USE MovieCatalogue;

CREATE TABLE IF NOT EXISTS `Genre` (
	`GenreID` INT NOT NULL AUTO_INCREMENT,
    `GenreName` VARCHAR(30) NOT NULL,
    PRIMARY KEY (`GenreID`)
    );
    
CREATE TABLE IF NOT EXISTS `Director` (
	`DirectorID` INT NOT NULL AUTO_INCREMENT,
    `FirstName` VARCHAR(30) NOT NULL,
    `SecondName` VARCHAR(30) NOT NULL,
    `BirthDate` DATE NULL,
    PRIMARY KEY (`DirectorID`)
);

CREATE TABLE IF NOT EXISTS `Rating` (
	`RatingID` INT NOT NULL AUTO_INCREMENT,
    `RatingName` VARCHAR(5) NOT NULL,
    PRIMARY KEY (`RatingID`)
    );
    
CREATE TABLE IF NOT EXISTS `Movie` (
`MovieID` INT NOT NULL AUTO_INCREMENT,
`GenreID` INT NOT NULL,
`DirectorID` INT NULL,
`RatingID` INT NULL,
`Title` VARCHAR(128) NOT NULL,
`ReleaseDate` DATE NULL,
PRIMARY KEY (`MovieID`)
);

ALTER TABLE `Movie`
ADD CONSTRAINT `fk_MovieGenre` FOREIGN KEY (`GenreID`) REFERENCES `Genre`
(`GenreID`) ON DELETE NO ACTION;
ALTER TABLE `Movie`
ADD CONSTRAINT `fk_MovieDirector` FOREIGN KEY (`DirectorID`) REFERENCES `Director`
(`DirectorID`) ON DELETE NO ACTION;
ALTER TABLE `Movie`
ADD CONSTRAINT `fk_MovieRating` FOREIGN KEY (`RatingID`) REFERENCES `Rating`
(`RatingID`) ON DELETE NO ACTION;

CREATE TABLE IF NOT EXISTS `Actor` (
`ActorID` INT NOT NULL AUTO_INCREMENT,
`FirstName` VARCHAR(30) NOT NULL,
`SecondName` VARCHAR(30) NOT NULL,
`BirthDate` DATE NULL,
PRIMARY KEY (`ActorID`)
);

CREATE TABLE IF NOT EXISTS `CastMembers` (
`CastMemberID` INT NOT NULL AUTO_INCREMENT,
`ActorID` INT NOT NULL,
`MovieID` INT NOT NULL,
`Role` VARCHAR(50) NOT NULL,
PRIMARY KEY (`CastMemberID`)
);
    
ALTER TABLE `CastMembers`
ADD CONSTRAINT `fk_CastMembersActor` FOREIGN KEY (`ActorID`) REFERENCES `Actor`
(`ActorID`) ON DELETE NO ACTION;
ALTER TABLE `CastMembers`
ADD CONSTRAINT `fk_CastMembersMovie` FOREIGN KEY (`MovieID`) REFERENCES `Movie`
(`MovieID`) ON DELETE NO ACTION;